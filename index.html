<!DOCTYPE html>
<html>
<head>
    <title>AI描述词</title>
    <script src="./nav/script.js"></script>
    <script src="./nav/JS.JS"></script>
    <script src="./nav/nav01.js"></script>
    <link rel="stylesheet" href="./nav/style_reference.css">
    <script>
        if (localStorage.getItem('authenticated') !== 'true') {
            window.location.href = 'login.html';
        }
    </script>
    <style>
        #navbar a.active {
            background-color: #c7e0f1;
            color: rgb(0, 0, 0);
        }
    </style>
</head>
<body>
    <script id="replace_with_navbar" src="./nav/nav.js"></script>
    <div id="myBtnContainer">
        <h4>美加AI关键词</h4>
        <button class="btn active" onclick="filterSelection('all')"data-filter="all"> Show all</button>
        <button class="btn filter-btn" onclick="filterSelection('Jesus')" data-filter="Jesus"> 主耶稣</button>
        <button class="btn filter-btn" onclick="filterSelection('Cartoon')" data-filter="Cartoon"> 卡通人物</button>
        <button class="btn filter-btn" onclick="filterSelection('people')" data-filter="people"> 真实人物</button>
        <button class="btn filter-btn" onclick="filterSelection('landscape')" data-filter="landscape"> 风景/花草</button>
        <button class="btn filter-btn" onclick="filterSelection('animal')" data-filter="animal"> 动物</button>
        <button class="btn filter-btn" onclick="filterSelection('Angel')" data-filter="Angel"> 天使</button>
        <button class="btn filter-btn" onclick="filterSelection('transportation')" data-filter="transportation"> 交通</button>
        <button class="btn filter-btn" onclick="filterSelection('architecture')" data-filter="architecture"> 建筑/牌子</button>
        <button class="btn filter-btn" onclick="filterSelection('disaster')" data-filter="disaster"> 灾难</button>
        <button class="btn filter-btn" onclick="filterSelection('heaven')" data-filter="heaven"> 地狱/天堂</button>
        <button class="btn filter-btn" onclick="filterSelection('element')" data-filter="element"> 元素</button>
        <button class="btn filter-btn" onclick="filterSelection('design')" data-filter="design"> 设计</button>
        <button class="btn filter-btn" onclick="filterSelection('religion')" data-filter="religion"> 宗教圣经故事</button>
    </div>

    <div id="imageContainer" class="fade"></div>

    <!-- The Modal -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <img id="modalImg" src="" alt="tupian">
            <p id="modalText"></p>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            console.log("Document loaded");
            loadImages("all");

            var btns = document.getElementsByClassName("btn");
            for (var i = 0; i < btns.length; i++) {
                btns[i].addEventListener("click", function() {
                    var filter = this.getAttribute("data-filter");
                    console.log("Filter selected: " + filter);

                    // 移除所有按钮的 selected 类
                    for (var j = 0; j < btns.length; j++) {
                        btns[j].classList.remove("selected");
                    }

                    // 给当前点击的按钮添加 selected 类
                    this.classList.add("selected");

                    loadImages(filter);
                });
            }
        });

        function loadImages(filter) {
            var imageContainer = document.getElementById("imageContainer");
            imageContainer.classList.remove("show");
            setTimeout(function() {
                imageContainer.innerHTML = "";

                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        console.log("Images loaded for filter: " + filter);
                        imageContainer.innerHTML = this.responseText;
                        imageContainer.classList.add("show");
                    }
                };
                xhr.open("GET", filter + ".html", true);
                xhr.send();
            }, 500); // 延迟500ms以适应渐隐效果
        }

        function showModal(event) {
            const contentDiv = event.target.closest('.content');
            const imgSrc = contentDiv.querySelector('img').src;
            const describeText = contentDiv.querySelector('.describe').innerText;

            document.getElementById('modalImg').src = imgSrc;
            document.getElementById('modalText').innerText = describeText;

            document.getElementById('myModal').style.display = "flex";
            document.body.classList.add('modal-open');
            document.querySelector('#navbar').classList.add('hidden');
        }

        function closeModal() {
            document.getElementById('myModal').style.display = "none";
            document.body.classList.remove('modal-open');
            document.querySelector('#navbar').classList.remove('hidden');
        }

        window.onclick = function(event) {
            if (event.target == document.getElementById('myModal')) {
                closeModal();
            }
        }
        
    </script>
</body>
</html>
